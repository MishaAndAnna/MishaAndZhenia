<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Михаил & Аня: Timeless Love</title>
    <style>
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'EB Garamond', 'Times New Roman', serif;
            background-color: #000;
            color: #e8e0c9;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,600;1,400&family=Cinzel:wght@400;600&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap');
        
        #container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            overflow: hidden;
            background: radial-gradient(ellipse at center, #000000 0%, #080010 100%);
            transition: all 3s cubic-bezier(0.42, 0, 0.58, 1);
        }
        
        .phase-initial #container { background: radial-gradient(ellipse at center, #000000 0%, #080010 100%); }
        .phase-middle #container { background: radial-gradient(ellipse at center, #0a0a2c 0%, #05051a 100%); }
        .phase-romantic #container { background: radial-gradient(ellipse at center, #1a0a34 0%, #0a051a 100%); }
        .phase-final #container { background: radial-gradient(ellipse at center, #240a2b 0%, #0a051a 100%); }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 5px 1px rgba(255, 255, 255, 0.8);
            animation: twinkle var(--twinkle-duration, 5s) ease-in-out infinite;
            animation-delay: var(--twinkle-delay, 0s);
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.1; transform: scale(0.8); }
            50% { opacity: 0.8; transform: scale(1.2); }
        }
        
        #clock-container {
            position: relative;
            width: 260px;
            height: 360px;
            opacity: 1;
            transition: all 2s cubic-bezier(0.6, -0.28, 0.735, 0.045);
            transform: scale(1);
            transform-origin: center center;
            z-index: 10;
            filter: drop-shadow(0 0 10px rgba(192, 156, 77, 0.4));
        }
        
        .clock-face {
            position: absolute;
            width: 220px;
            height: 220px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1a1208;
            border: 12px solid #c09c4d;
            border-radius: 50%;
            z-index: 2;
            box-shadow: 0 0 20px rgba(192, 156, 77, 0.6), inset 0 0 30px rgba(0, 0, 0, 0.7);
        }
        
        .clock-face::before {
            content: '';
            position: absolute;
            width: 90%;
            height: 90%;
            top: 5%;
            left: 5%;
            border: 1px solid rgba(192, 156, 77, 0.3);
            border-radius: 50%;
        }
        
        .clock-numbers {
            position: absolute;
            width: 100%;
            height: 100%;
            font-family: 'Cinzel', serif;
            color: #c09c4d;
            font-size: 16px;
            font-weight: bold;
        }
        
        .clock-number {
            position: absolute;
            width: 20px;
            height: 20px;
            text-align: center;
            line-height: 20px;
        }
        
        .clock-hands {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 3;
        }
        
        .hand {
            position: absolute;
            left: 50%;
            bottom: 50%;
            transform-origin: 50% 100%;
            background: #c09c4d;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        .hour-hand { width: 6px; height: 60px; margin-left: -3px; border-radius: 4px; }
        .minute-hand { width: 4px; height: 90px; margin-left: -2px; border-radius: 4px; }
        .second-hand { width: 2px; height: 100px; margin-left: -1px; background: #d4af37; }
        
        .clock-center {
            position: absolute;
            width: 12px;
            height: 12px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #d4af37;
            border-radius: 50%;
            z-index: 4;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.7);
        }
        
        .clock-ornament {
            position: absolute;
            width: 20px;
            height: 20px;
            background: none;
            border: 2px solid rgba(192, 156, 77, 0.5);
            border-radius: 50%;
            z-index: 5;
            opacity: 0.8;
            animation: floatOrnament 4s ease-in-out infinite;
        }
        
        .clock-ornament.top-left { top: 10px; left: 20px; }
        .clock-ornament.top-right { top: 10px; right: 20px; }
        .clock-ornament.bottom-left { bottom: 10px; left: 20px; }
        .clock-ornament.bottom-right { bottom: 10px; right: 20px; }
        
        #heraldic {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            opacity: 0;
            transition: all 3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
            z-index: 15;
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.2));
        }
        
        #heraldic.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        
        #heraldic svg {
            width: 300px;
            height: 300px;
            filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.3));
        }
        
        #romantic-text {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%) translateY(50px);
            opacity: 0;
            transition: all 2.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
            z-index: 15;
            width: 90%;
            max-width: 600px;
        }
        
        #romantic-text.visible { opacity: 1; transform: translateX(-50%) translateY(0); }
        
        #romantic-text p {
            font-family: 'EB Garamond', serif;
            font-size: 28px;
            font-style: italic;
            line-height: 1.5;
            color: #fafafa;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
        }
        
        #romantic-text .quote {
            font-size: 20px;
            color: #e0e0e0;
            font-weight: 300;
            position: relative;
            padding: 15px 30px;
            margin-top: 20px;
        }
        
        #romantic-text .quote::before,
        #romantic-text .quote::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 40px;
            opacity: 0.5;
        }
        
        #romantic-text .quote::before { top: 0; left: 0; border-top: 2px solid #D4AF37; border-left: 2px solid #D4AF37; }
        #romantic-text .quote::after { bottom: 0; right: 0; border-bottom: 2px solid #D4AF37; border-right: 2px solid #D4AF37; }
        
        .fog {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(200, 200, 200, 0.1), transparent);
            opacity: 0;
            animation: fogDrift 30s linear infinite;
            z-index: 1;
        }
        
        @keyframes fogDrift {
            0% { transform: translateX(-10%) translateY(-10%); }
            50% { transform: translateX(10%) translateY(10%); }
            100% { transform: translateX(-10%) translateY(-10%); }
        }
        
        .tea-leaf {
            position: absolute;
            width: 15px;
            height: 15px;
            background: radial-gradient(ellipse at center, #8B9862 0%, #4A593D 100%);
            border-radius: 15px 0;
            opacity: 0;
            transform: rotate(45deg) scale(0.7);
            filter: blur(0.5px);
            z-index: 5;
        }
        
        .light-particle {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0) 70%);
            opacity: 0;
            transform: scale(0);
            z-index: 6;
        }
        
        #replay-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.5);
            color: #d4af37;
            font-family: 'EB Garamond', serif;
            font-size: 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            z-index: 100;
        }
        
        #replay-button:hover { background: rgba(212, 175, 55, 0.2); transform: scale(1.05); }
        #replay-button.visible { opacity: 1; }
        
        .decorative-corner {
            position: absolute;
            width: 100px;
            height: 100px;
            opacity: 0;
            transition: all 2s cubic-bezier(0, 0.55, 0.45, 1);
            z-index: 5;
        }
        
        .decorative-corner svg {
            width: 100%;
            height: 100%;
            fill: none;
            stroke: rgba(192, 156, 77, 0.4);
            stroke-width: 1;
        }
        
        .decorative-corner.top-left { top: 20px; left: 20px; transform: rotate(0deg) scale(0.8); }
        .decorative-corner.top-right { top: 20px; right: 20px; transform: rotate(90deg) scale(0.8); }
        .decorative-corner.bottom-left { bottom: 20px; left: 20px; transform: rotate(270deg) scale(0.8); }
        .decorative-corner.bottom-right { bottom: 20px; right: 20px; transform: rotate(180deg) scale(0.8); }
        
        .decorative-corner.visible { opacity: 0.5; }
        .decorative-corner.top-left.visible { transform: rotate(0deg) scale(1); }
        .decorative-corner.top-right.visible { transform: rotate(90deg) scale(1); }
        .decorative-corner.bottom-left.visible { transform: rotate(270deg) scale(1); }
        .decorative-corner.bottom-right.visible { transform: rotate(180deg) scale(1); }
        
        @keyframes floatOrnament {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }
        
        @keyframes glow {
            0%, 100% { opacity: var(--glow-min, 0.3); transform: scale(var(--glow-scale-min, 0.8)); }
            50% { opacity: var(--glow-max, 0.7); transform: scale(var(--glow-scale-max, 1.2)); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .medallion {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(80, 0, 0, 0.2);
            border: 2px solid rgba(192, 156, 77, 0.3);
            opacity: 0;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 7;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(192, 156, 77, 0.2);
            cursor: pointer;
        }
        
        .medallion.left { top: 50%; left: 15%; transform: translateY(-50%) scale(0); }
        .medallion.right { top: 50%; right: 15%; transform: translateY(-50%) scale(0); }
        
        .medallion.visible.left { opacity: 1; transform: translateY(-50%) scale(1); }
        .medallion.visible.right { opacity: 1; transform: translateY(-50%) scale(1); }
        
        .medallion:hover { transform: translateY(-50%) scale(1.05); box-shadow: 0 0 40px rgba(192, 156, 77, 0.4); }
        
        .medallion::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(192, 156, 77, 0.2) 0%, transparent 70%);
            animation: pulse 8s infinite;
        }
        
        .medallion::after {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            width: calc(100% - 10px);
            height: calc(100% - 10px);
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .medallion-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            height: 80%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 30px;
            color: rgba(255, 255, 255, 0.8);
            text-shadow: 0 0 10px rgba(192, 156, 77, 0.5);
        }
        
        .popup {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 80%;
            max-width: 500px;
            padding: 30px;
            background: rgba(10, 5, 26, 0.9);
            border: 2px solid rgba(192, 156, 77, 0.5);
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(192, 156, 77, 0.3);
            z-index: 200;
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
        }
        
        .popup.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        
        .popup p {
            font-family: 'EB Garamond', serif;
            font-size: 20px;
            color: #fafafa;
            line-height: 1.6;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }
        
        .popup button {
            margin-top: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.5);
            color: #d4af37;
            font-family: 'EB Garamond', serif;
            font-size: 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .popup button:hover { background: rgba(212, 175, 55, 0.2); transform: scale(1.05); }
        
        .connecting-line {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 0;
            height: 2px;
            background: linear-gradient(to right, transparent, rgba(192, 156, 77, 0.6), transparent);
            opacity: 0;
            transition: all 3s ease;
            z-index: 6;
        }
        
        .connecting-line.visible { width: 30%; opacity: 1; }
        
        .heart-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 40px;
            height: 40px;
            opacity: 0;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transition-delay: 1s;
            z-index: 7;
        }
        
        .heart-center.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); animation: pulse 2s infinite; }
        
        .heart-center svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 5px rgba(192, 156, 77, 0.5));
        }
        
        .eternal-flame {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%) scale(0);
            opacity: 0;
            width: 50px;
            height: 60px;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 7;
        }
        
        .eternal-flame.visible { opacity: 1; transform: translateX(-50%) scale(1); }
        
        .flame {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 40px;
            background: linear-gradient(to top, #ff9d00, #ff0000);
            border-radius: 50% 50% 20% 20% / 60% 60% 40% 40%;
            animation: flicker 1s infinite alternate;
            filter: blur(1px);
            transform-origin: center bottom;
        }
        
        .flame::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(255, 255, 0, 0.5), transparent);
            border-radius: 50% 50% 20% 20% / 60% 60% 40% 40%;
            filter: blur(3px);
            animation: flicker 1.5s infinite alternate-reverse;
            transform-origin: center bottom;
        }
        
        .flame::after {
            content: '';
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 60%;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            filter: blur(5px);
            animation: flicker 0.8s infinite alternate;
        }
        
        @keyframes flicker {
            0%, 100% { transform: scaleY(1) scaleX(1); }
            25% { transform: scaleY(1.1) scaleX(0.9); }
            50% { transform: scaleY(0.95) scaleX(1.05); }
            75% { transform: scaleY(1.05) scaleX(0.95); }
        }
        
        .golden-frame {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 2px solid rgba(192, 156, 77, 0.3);
            opacity: 0;
            transition: all 3s ease;
            pointer-events: none;
            z-index: 2;
        }
        
        .golden-frame.visible { opacity: 1; }
        
        .final-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            font-family: 'Cinzel', serif;
            font-size: 50px;
            font-weight: 600;
            text-align: center;
            color: transparent;
            opacity: 0;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 20;
            text-shadow: 0 0 10px rgba(192, 156, 77, 0.8);
            -webkit-text-stroke: 1px rgba(192, 156, 77, 0.5);
        }
        
        .final-message.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        
        .love-aura {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 0;
            height: 0;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 0, 60, 0.05) 0%, transparent 70%);
            opacity: 0;
            z-index: 3;
            transition: all 8s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        
        .love-aura.active { width: 800px; height: 800px; opacity: 0.5; }
        
        .royal-crest {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%) scale(0);
            opacity: 0;
            width: 120px;
            height: 150px;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 8;
        }
        
        .royal-crest.visible { opacity: 1; transform: translateX(-50%) scale(1); }
        
        .romantic-endnote {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Cinzel', serif;
            font-size: 32px;
            font-weight: 600;
            color: #d4af37;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.7);
            opacity: 0;
            transition: opacity 2s ease;
            z-index: 25;
            white-space: nowrap;
        }
        
        .romantic-endnote.visible { opacity: 1; }
        
        .romantic-endnote span {
            display: inline-block;
            opacity: 0;
            animation: letterFade 0.5s ease forwards;
        }
        
        @keyframes letterFade {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .endnote-ornament {
            position: absolute;
            width: 60px;
            height: 60px;
            opacity: 0;
            transition: all 1.5s ease;
        }
        
        .endnote-ornament.left { left: -80px; top: 50%; transform: translateY(-50%) scale(0); }
        .endnote-ornament.right { right: -80px; top: 50%; transform: translateY(-50%) scale(0); }
        
        .endnote-ornament.visible { opacity: 0.6; transform: translateY(-50%) scale(1); }
        
        .endnote-ornament svg {
            width: 100%;
            height: 100%;
            stroke: rgba(192, 156, 77, 0.5);
            stroke-width: 1;
            fill: none;
        }
        
        .endnote-line {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 1px;
            background: #d4af37;
            opacity: 0;
            transition: width 2s ease, opacity 0.5s ease;
        }
        
        .endnote-line.visible { width: 80%; opacity: 0.7; }
        
        .light-particle.endnote-particle {
            width: 6px;
            height: 6px;
            animation: glow 2s ease-in-out infinite;
        }
        
        /* Стили анимаций */
        .fade-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            opacity: 0;
            transition: opacity 1.5s ease;
            pointer-events: none;
            z-index: 300;
        }
        .fade-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        .scene {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            background: #000;
            display: none;
            z-index: 250;
        }
        
        .text-fragment {
            position: absolute;
            font-family: 'EB Garamond', serif;
            font-size: 28px;
            color: #fafafa;
            opacity: 0;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
            letter-spacing: 1.5px;
        }
        
        @keyframes fadeText {
            0% { opacity: 0; transform: translateY(20px); }
            30% { opacity: 1; transform: translateY(0); }
            70% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-20px); }
        }
        
        .return-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #d4af37;
            color: #d4af37;
            font-family: 'EB Garamond', serif;
            font-size: 16px;
            border-radius: 20px;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            animation: showButton 1s ease forwards 10s;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
            backdrop-filter: blur(3px);
        }
        
        .return-button:hover {
            background: rgba(212, 175, 55, 0.2);
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }
        
        @keyframes showButton {
            to { opacity: 1; }
        }
        
        #mikhail-scene {
            background: linear-gradient(to bottom, #2b2b2b 0%, #1a1a1a 100%);
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background: linear-gradient(to bottom, #2b2b2b 0%, #1a1a1a 100%); }
            50% { background: linear-gradient(to bottom, #302b20 0%, #1a1a10 100%); }
            100% { background: linear-gradient(to bottom, #2b2b2b 0%, #1a1a1a 100%); }
        }
        
        .lantern-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            animation: lanternAppear 12s ease forwards;
            z-index: 5;
        }
        
        @keyframes lanternAppear {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            15% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            85% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
        }
        
        .lantern-body {
            position: relative;
            width: 100px;
            height: 160px;
            background: #603814;
            border-radius: 8px 8px 20px 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }
        
        .lantern-top {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 15px;
            background: #4a2b10;
            border-radius: 5px 5px 0 0;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }
        
        .lantern-handle {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 30px;
            border: 4px solid #4a2b10;
            border-bottom: none;
            border-radius: 20px 20px 0 0;
        }
        
        .lantern-frame {
            position: absolute;
            top: 10px;
            left: 10px;
            width: calc(100% - 20px);
            height: calc(100% - 20px);
            background: rgba(255, 215, 150, 0.15);
            border: 2px solid #8c5d3a;
            border-radius: 6px 6px 15px 15px;
            overflow: hidden;
        }
        
        .lantern-glass {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 215, 150, 0.1);
            backdrop-filter: blur(1px);
        }
        
        .lantern-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(4, 1fr);
        }
        
        .lantern-grid::before, .lantern-grid::after {
            content: '';
            position: absolute;
            background: #8c5d3a;
        }
        
        .lantern-grid::before {
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            transform: translateY(-50%);
        }
        
        .lantern-grid::after {
            top: 0;
            left: 50%;
            height: 100%;
            width: 2px;
            transform: translateX(-50%);
        }
        
        .lantern-flame {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 30px;
            background: radial-gradient(ellipse at center, #ffee88 0%, #ff8800 70%, transparent 100%);
            border-radius: 50% 50% 20% 20% / 60% 60% 40% 40%;
            filter: blur(2px);
            animation: flameFlicker 3s ease-in-out infinite;
            box-shadow: 0 0 20px #ff8800, 0 0 40px #ffee88;
            z-index: 2;
        }
        
        @keyframes flameFlicker {
            0% { transform: translate(-50%, -50%) scale(1); }
            25% { transform: translate(-50%, -50%) scale(1.1) skew(2deg, 0deg); }
            50% { transform: translate(-50%, -50%) scale(0.9) skew(-1deg, 1deg); }
            75% { transform: translate(-50%, -50%) scale(1.05) skew(-3deg, 0.5deg); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }
        
        .lantern-glow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 215, 150, 0.4) 0%, transparent 70%);
            filter: blur(5px);
            animation: glowPulse 4s ease-in-out infinite;
            z-index: 1;
        }
        
        .lantern-ambient {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 165, 70, 0.2) 0%, transparent 70%);
            opacity: 0;
            animation: ambientGlow 12s ease forwards;
        }
        
        @keyframes ambientGlow {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            20% { opacity: 0.7; transform: translate(-50%, -50%) scale(1); }
            80% { opacity: 0.7; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
        }
        
        #mikhail-scene .text-fragment:nth-child(2) {
            top: 30%;
            left: 50%;
            transform: translateX(-50%);
            animation: fadeText 3s ease forwards;
            animation-delay: 3s;
        }
        
        #mikhail-scene .text-fragment:nth-child(3) {
            top: 60%;
            left: 65%;
            transform: translateX(-50%);
            animation: fadeText 3s ease forwards;
            animation-delay: 6s;
        }
        
        #mikhail-scene .text-fragment:nth-child(4) {
            top: 40%;
            left: 35%;
            transform: translateX(-50%);
            animation: fadeText 3s ease forwards;
            animation-delay: 9s;
        }
        
        /* Стили для сцены Анюты из первого кода */
        #annyuta-scene {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: #000;
}
        
        .night-sky {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #000000, #05021a, #0a0339, #0c054f);
            z-index: 0;
        }
        
        .stars-scene {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .star-scene {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
            animation: twinkle-scene 3s infinite ease-in-out;
        }
        
        @keyframes twinkle-scene {
            0%, 100% { opacity: 0.2; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .moon-container {
            position: absolute;
            top: 10%;
            right: 10%;
            width: 200px;
            height: 200px;
            z-index: 2;
            animation: floatMoon 12s ease-in-out infinite;
            cursor: pointer;
        }
        
        .moon {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(145deg, #d8d8d8, #a8a8a8);
            box-shadow: 0 0 80px 20px rgba(255, 255, 255, 0.6);
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        .moon:hover {
            transform: scale(1.1);
            box-shadow: 0 0 100px 30px rgba(255, 255, 255, 0.8);
        }
        
        .crater {
            position: absolute;
            background-color: rgba(170, 170, 170, 0.8);
            border-radius: 50%;
        }
        
        .name {
            font-family: 'Dancing Script', cursive;
            font-size: 4rem;
            background: linear-gradient(to right, #ffffff, #c7d3f3, #ffffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s infinite;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0.9;
            z-index: 3;
        }
        
        @keyframes shimmer {
            0% { background-position: -100% 0; }
            100% { background-position: 200% 0; }
        }
        
        @keyframes floatMoon {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(-30px, 20px); }
            50% { transform: translate(0, 40px); }
            75% { transform: translate(30px, 20px); }
        }
        
        .constellation-line {
            position: absolute;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.3), transparent);
            height: 1px;
            transform-origin: left center;
            opacity: 0;
            animation: drawLine 4s forwards;
            z-index: 1;
        }
        
        @keyframes drawLine {
            0% { width: 0; opacity: 0; }
            50% { opacity: 1; }
            100% { width: 100%; opacity: 0.5; }
        }
        
        .shooting-star {
            position: absolute;
            width: 4px;
            height: 4px;
            background: linear-gradient(to right, transparent, #fff 50%, transparent);
            box-shadow: 0 0 20px 5px #fff;
            border-radius: 50%;
            opacity: 0;
            transform: rotate(45deg);
            z-index: 1;
        }
        
        @keyframes shootingStar {
            0% { transform: translate(0, 0) rotate(45deg) scale(1); opacity: 1; }
            70% { opacity: 1; }
            100% { transform: translate(var(--travel-x), var(--travel-y)) rotate(45deg) scale(0.2); opacity: 0; }
        }
        
        .moon-glow {
            position: absolute;
            width: 300%;
            height: 300%;
            background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0) 70%);
            top: -100%;
            left: -100%;
            z-index: -1;
            animation: pulse 5s infinite alternate;
        }
        
        @keyframes pulse {
            0% { opacity: 0.1; }
            100% { opacity: 0.4; }
        }
        
        .mysterious-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 2;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            opacity: 0;
            animation: float 20s linear infinite;
        }
        
        @keyframes float {
            0% {
                transform: translate(var(--start-x), var(--start-y)) scale(0);
                opacity: 0;
            }
            10% {
                opacity: var(--opacity);
                transform: translate(var(--start-x), var(--start-y)) scale(var(--size));
            }
            90% {
                opacity: var(--opacity);
                transform: translate(var(--end-x), var(--end-y)) scale(var(--size));
            }
            100% {
                transform: translate(var(--end-x), var(--end-y)) scale(0);
                opacity: 0;
            }
        }
        
        .cloud {
            position: absolute;
            opacity: 0.2;
            filter: blur(20px);
            border-radius: 100px;
            background: rgba(100, 100, 150, 0.2);
            animation: float-cloud 30s linear infinite;
        }
        
        @keyframes float-cloud {
            0% { transform: translateX(-120%); }
            100% { transform: translateX(120vw); }
        }
        
        .comet {
            position: absolute;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.8));
            height: 2px;
            transform-origin: left center;
            animation: cometMove 8s linear forwards;
            z-index: 1;
        }
        
        .comet:before {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 20px 10px rgba(255, 255, 255, 0.5);
        }
        
        @keyframes cometMove {
            0% { 
                transform: translate(0, 0) rotate(var(--angle)); 
                opacity: 0;
                width: 0;
            }
            5% {
                opacity: 1;
                width: var(--length);
            }
            90% { 
                opacity: 1;
                width: var(--length);
            }
            100% { 
                transform: translate(var(--travel-x), var(--travel-y)) rotate(var(--angle)); 
                opacity: 0;
                width: 0;
            }
        }
        
        .eclipse {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, transparent 0%, transparent 30%, rgba(0, 0, 0, 0.5) 70%, rgba(0, 0, 0, 0.8) 100%);
            opacity: 0;
            transition: opacity 3s ease;
            z-index: 0;
        }
        
        .lunar-rays {
            position: absolute;
            width: 400%;
            height: 400%;
            top: -150%;
            left: -150%;
            background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0.1) 30%, transparent 70%);
            opacity: 0;
            transform: scale(0);
            transition: all 3s ease;
            z-index: 0;
        }
        
        .nebula {
            position: absolute;
            filter: blur(30px);
            opacity: 0.3;
            background: radial-gradient(ellipse at center, rgba(100, 100, 255, 0.3) 0%, rgba(50, 50, 100, 0.1) 70%, transparent 100%);
            animation: nebulaMove 60s linear infinite alternate;
            z-index: 0;
        }
        
        @keyframes nebulaMove {
            0% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(20px, 20px) scale(1.1); }
            100% { transform: translate(-20px, -20px) scale(0.9); }
        }
        
        .praise-text {
            position: absolute;
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            color: rgba(255, 255, 255, 0);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            opacity: 0;
            transition: opacity 2s ease-in-out;
            pointer-events: none;
            z-index: 3;
        }
        
        .star-burst {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            transform: scale(0);
            box-shadow: 0 0 20px 10px rgba(255, 255, 255, 0);
            animation: starBurst 2s ease-out forwards;
            z-index: 1;
        }
        
        @keyframes starBurst {
            0% { transform: scale(0); box-shadow: 0 0 20px 10px rgba(255, 255, 255, 0); }
            20% { transform: scale(1); box-shadow: 0 0 20px 10px rgba(255, 255, 255, 0.8); }
            100% { transform: scale(0); box-shadow: 0 0 50px 30px rgba(255, 255, 255, 0); }
        }
        
        @media (max-width: 768px) {
            #romantic-text p { font-size: 20px; }
            #romantic-text .quote { font-size: 16px; }
            .medallion { width: 100px; height: 100px; }
            .medallion.left { left: 10%; }
            .medallion.right { right: 10%; }
            #heraldic svg { width: 200px; height: 200px; }
            .popup p { font-size: 18px; }
            .romantic-endnote { font-size: 24px; }
        }
        
        @media (max-width: 480px) {
            #clock-container { transform: scale(0.7); }
            .connecting-line.visible { width: 40%; }
            .medallion { width: 80px; height: 80px; }
            .medallion-content { font-size: 20px; }
            #heraldic svg { width: 150px; height: 150px; }
            .final-message { font-size: 30px; }
            .popup { padding: 20px; }
            .popup p { font-size: 16px; }
            .romantic-endnote { font-size: 18px; }
            .endnote-ornament { width: 40px; height: 40px; }
            .endnote-ornament.left { left: -50px; }
            .endnote-ornament.right { right: -50px; }
        }
    </style>
</head>
<body class="phase-initial">
    <div id="container">
        <div class="decorative-corner top-left">
            <svg viewBox="0 0 100 100">
                <path d="M 0 30 Q 0 0 30 0" />
                <path d="M 0 50 Q 0 10 50 0" />
            </svg>
        </div>
        <div class="decorative-corner top-right">
            <svg viewBox="0 0 100 100">
                <path d="M 0 30 Q 0 0 30 0" />
                <path d="M 0 50 Q 0 10 50 0" />
            </svg>
        </div>
        <div class="decorative-corner bottom-left">
            <svg viewBox="0 0 100 100">
                <path d="M 0 30 Q 0 0 30 0" />
                <path d="M 0 50 Q 0 10 50 0" />
            </svg>
        </div>
        <div class="decorative-corner bottom-right">
            <svg viewBox="0 0 100 100">
                <path d="M 0 30 Q 0 0 30 0" />
                <path d="M 0 50 Q 0 10 50 0" />
            </svg>
        </div>
        
        <div class="golden-frame"></div>
        
        <div id="clock-container">
            <div class="clock-face">
                <div class="clock-numbers">
                    <div class="clock-number" style="top: 10px; left: 50%; transform: translateX(-50%);">XII</div>
                    <div class="clock-number" style="top: 50%; right: 10px; transform: translateY(-50%);">III</div>
                    <div class="clock-number" style="bottom: 10px; left: 50%; transform: translateX(-50%);">VI</div>
                    <div class="clock-number" style="top: 50%; left: 10px; transform: translateY(-50%);">IX</div>
                </div>
                <div class="clock-hands">
                    <div class="hand hour-hand"></div>
                    <div class="hand minute-hand"></div>
                    <div class="hand second-hand"></div>
                </div>
                <div class="clock-center"></div>
            </div>
            <div class="clock-ornament top-left"></div>
            <div class="clock-ornament top-right"></div>
            <div class="clock-ornament bottom-left"></div>
            <div class="clock-ornament bottom-right"></div>
        </div>
        
        <div id="heraldic">
            <svg viewBox="0 0 100 120">
                <path d="M 50 0 C 20 0 0 20 0 50 L 0 100 L 50 120 L 100 100 L 100 50 C 100 20 80 0 50 0 Z" fill="rgba(80, 0, 0, 0.2)" stroke="rgba(192, 156, 77, 0.5)" stroke-width="1" />
                <path d="M 50 10 C 25 10 10 25 10 50 L 10 95 L 50 110 L 90 95 L 90 50 C 90 25 75 10 50 10 Z" fill="none" stroke="rgba(255, 255, 255, 0.2)" stroke-width="0.5" />
                <path d="M 50 40 L 60 55 L 75 60 L 60 70 L 65 85 L 50 75 L 35 85 L 40 70 L 25 60 L 40 55 Z" fill="rgba(192, 156, 77, 0.3)" stroke="rgba(255, 255, 255, 0.3)" stroke-width="0.5" />
                <path d="M 50 50 L 50 70" stroke="rgba(192, 156, 77, 0.5)" stroke-width="1" />
            </svg>
        </div>
        
        <div id="romantic-text">
            <p>My dearest Anna, thou wert mine own light, mine own joy. Though we art parted, my heart hath not let thee go.</p>
            <div class="quote">I do still love thee, and each day I dream of returning to what once was betwixt us.</div>
        </div>
        
        <div class="medallion left">
            <div class="medallion-content">Mikhail</div>
        </div>
        <div class="medallion right">
            <div class="medallion-content">Annyuta</div>
        </div>
        
        <div class="connecting-line"></div>
        
        <div class="heart-center">
            <svg viewBox="0 0 100 100">
                <path d="M 50 30 L 65 15 A 17 17 0 1 1 95 40 L 50 85 L 5 40 A 17 17 0 1 1 35 15 L 50 30 Z" fill="rgba(180, 20, 40, 0.6)" stroke="rgba(255, 255, 255, 0.5)" stroke-width="1" />
            </svg>
        </div>
        
        <div class="eternal-flame">
            <div class="flame"></div>
        </div>
        
        <div class="love-aura"></div>
        
        <div class="fog"></div>
        
        <div class="final-message">My dear beloved, shall we begin anew, if I can be dare to ask for chance?</div>
        
        <div class="romantic-endnote">
            <span>O</span><span>u</span><span>r</span><span> </span>
            <span>l</span><span>o</span><span>v</span><span>e</span><span> </span>
            <span>i</span><span>s</span><span> </span>
            <span>a</span><span> </span>
            <span>f</span><span>l</span><span>a</span><span>m</span><span>e</span><span> </span>
            <span>t</span><span>h</span><span>a</span><span>t</span><span> </span>
            <span>t</span><span>i</span><span>m</span><span>e</span><span> </span>
            <span>c</span><span>a</span><span>n</span><span>n</span><span>o</span><span>t</span><span> </span>
            <span>e</span><span>x</span><span>t</span><span>i</span><span>n</span><span>g</span><span>u</span><span>i</span><span>s</span><span>h</span>
            <div class="endnote-ornament left">
                <svg viewBox="0 0 100 100">
                    <path d="M 50 50 Q 30 20 10 50 Q 30 80 50 50" />
                </svg>
            </div>
            <div class="endnote-ornament right">
                <svg viewBox="0 0 100 100">
                    <path d="M 50 50 Q 70 20 90 50 Q 70 80 50 50" />
                </svg>
            </div>
            <div class="endnote-line"></div>
        </div>
        
        <button id="replay-button">Once More</button>
        
        <div class="fade-overlay"></div>
        
        <div id="mikhail-scene" class="scene">
            <div class="lantern-container">
                <div class="lantern-handle"></div>
                <div class="lantern-top"></div>
                <div class="lantern-body">
                    <div class="lantern-frame">
                        <div class="lantern-glass"></div>
                        <div class="lantern-grid"></div>
                        <div class="lantern-flame"></div>
                        <div class="lantern-glow"></div>
                    </div>
                </div>
                <div class="lantern-ambient"></div>
            </div>
            <div class="text-fragment">I want to try to take care</div>
            <div class="text-fragment">I want to love and either to be loved</div>
            <div class="text-fragment">I want to be with Annyuta for now and for the rest of our life</div>
            <button class="return-button" onclick="endScene('mikhail-scene')">Вернуться</button>
        </div>
        
        <div id="annyuta-scene" class="scene">
            <div class="night-sky"></div>
            <div class="stars-scene" id="stars-scene"></div>
            <div class="name">Annyuta</div>
            <div class="moon-container" id="moonContainer">
                <div class="moon-glow"></div>
                <div class="moon" id="moon">
                    <!-- Craters will be added via JavaScript -->
                </div>
            </div>
            <div class="mysterious-particles" id="particles-scene"></div>
            <div class="text-fragment">Annyuta is the most wonderful person I’ve ever met</div>
            <div class="text-fragment">With Annyuta, the world shines brighter</div>
            <div class="text-fragment">Annyuta is the embodiment of kindness and light</div>
            <div class="text-fragment">There’s no one better than Annyuta</div>
            <div class="text-fragment">Annyuta is the dearest soul in my life</div>
            <div class="text-fragment">Annyuta makes every day extraordinary</div>
            <div class="text-fragment">Annyuta is pure happiness</div>
            <button class="return-button" onclick="endScene('annyuta-scene')">Вернуться</button>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            startAnimation();
            document.getElementById('replay-button').addEventListener('click', function() {
                resetAnimation();
                setTimeout(startAnimation, 500);
            });
            createStars();
            createTeaLeaves();
            setupClock();
            setupMedallionPopups();
            createClockNumbers();
        });
        
        function startAnimation() {
            setTimeout(function() {
                document.body.classList.remove('phase-initial');
                document.body.classList.add('phase-middle');
                document.querySelectorAll('.decorative-corner').forEach(corner => corner.classList.add('visible'));
                document.querySelector('.golden-frame').classList.add('visible');
                document.querySelectorAll('.star').forEach(star => star.style.opacity = 1);
            }, 1000);
            
            setTimeout(function() {
                document.getElementById('clock-container').style.opacity = 0;
                document.getElementById('clock-container').style.transform = 'scale(0)';
                setTimeout(function() {
                    document.getElementById('heraldic').classList.add('visible');
                }, 500);
            }, 14000);
            
            setTimeout(function() {
                document.body.classList.remove('phase-middle');
                document.body.classList.add('phase-romantic');
                document.getElementById('romantic-text').classList.add('visible');
                document.querySelector('.fog').style.opacity = 0.3;
                createTeaLeaves();
            }, 17000);
            
            setTimeout(function() {
                document.querySelector('.medallion.left').classList.add('visible');
                document.querySelector('.medallion.right').classList.add('visible');
                setTimeout(function() {
                    document.querySelector('.connecting-line').classList.add('visible');
                    setTimeout(function() {
                        document.querySelector('.heart-center').classList.add('visible');
                    }, 1000);
                }, 2000);
            }, 20000);
            
            setTimeout(function() {
                document.body.classList.remove('phase-romantic');
                document.body.classList.add('phase-final');
                document.querySelector('.eternal-flame').classList.add('visible');
                document.querySelector('.love-aura').classList.add('active');
            }, 24000);
            
            setTimeout(function() {
                document.querySelector('.final-message').classList.add('visible');
                setTimeout(function() {
                    document.getElementById('replay-button').classList.add('visible');
                    const endnote = document.querySelector('.romantic-endnote');
                    endnote.classList.add('visible');
                    endnote.querySelectorAll('span').forEach((span, index) => {
                        span.style.animationDelay = `${index * 0.05}s`;
                    });
                    setTimeout(() => {
                        document.querySelector('.endnote-ornament.left').classList.add('visible');
                        document.querySelector('.endnote-ornament.right').classList.add('visible');
                        document.querySelector('.endnote-line').classList.add('visible');
                        createEndnoteParticles();
                    }, 1000);
                }, 2000);
            }, 29000);
            
            setTimeout(createLightParticles, 19000);
        }
        
        function resetAnimation() {
            document.body.className = 'phase-initial';
            document.querySelectorAll('.decorative-corner, .golden-frame, .medallion').forEach(el => el.classList.remove('visible'));
            document.getElementById('heraldic').classList.remove('visible');
            document.getElementById('romantic-text').classList.remove('visible');
            document.querySelector('.connecting-line').classList.remove('visible');
            document.querySelector('.heart-center').classList.remove('visible');
            document.querySelector('.eternal-flame').classList.remove('visible');
            document.querySelector('.final-message').classList.remove('visible');
            document.querySelector('.love-aura').classList.remove('active');
            document.getElementById('replay-button').classList.remove('visible');
            const clockContainer = document.getElementById('clock-container');
            clockContainer.style.opacity = '1';
            clockContainer.style.transform = 'scale(1)';
            document.querySelectorAll('.star, .tea-leaf, .light-particle, .fog').forEach(el => el.remove());
            document.querySelector('.fog').style.opacity = '0';
            document.querySelectorAll('.popup').forEach(popup => popup.remove());
            document.querySelector('.romantic-endnote').classList.remove('visible');
            document.querySelector('.endnote-ornament.left').classList.remove('visible');
            document.querySelector('.endnote-ornament.right').classList.remove('visible');
            document.querySelector('.endnote-line').classList.remove('visible');
            document.querySelectorAll('.scene').forEach(scene => scene.style.display = 'none');
        }
        
        function setupClock() {
            const hourHand = document.querySelector('.hour-hand');
            const minuteHand = document.querySelector('.minute-hand');
            const secondHand = document.querySelector('.second-hand');

            function updateClock() {
                const now = new Date();
                const hours = now.getHours() % 12;
                const minutes = now.getMinutes();
                const seconds = now.getSeconds();

                const hourDeg = (hours * 30) + (minutes / 2);
                const minuteDeg = minutes * 6;
                const secondDeg = seconds * 6;

                hourHand.style.transform = `rotate(${hourDeg}deg)`;
                minuteHand.style.transform = `rotate(${minuteDeg}deg)`;
                secondHand.style.transform = `rotate(${secondDeg}deg)`;

                requestAnimationFrame(updateClock);
            }

            updateClock();
        }
        
        function createStars() {
            const container = document.getElementById('container');
            const starCount = Math.min(window.innerWidth / 10, 100);
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.setProperty('--twinkle-duration', `${Math.random() * 4 + 2}s`);
                star.style.setProperty('--twinkle-delay', `${Math.random() * 2}s`);
                container.appendChild(star);
            }
        }
        
        function createTeaLeaves() {
            const container = document.getElementById('container');
            const leafCount = Math.min(window.innerWidth / 20, 30);
            for (let i = 0; i < leafCount; i++) {
                setTimeout(() => {
                    const leaf = document.createElement('div');
                    leaf.className = 'tea-leaf';
                    leaf.style.left = `${Math.random() * 100}%`;
                    leaf.style.setProperty('--petal-sway', `${Math.random() * 200 - 100}px`);
                    leaf.style.animation = `floatPetal ${Math.random() * 8 + 7}s ease-in-out`;
                    container.appendChild(leaf);
                    setTimeout(() => {
                        if (leaf.parentNode) leaf.parentNode.removeChild(leaf);
                    }, 15000);
                }, i * 300);
            }
        }
        
        function createLightParticles() {
            const container = document.getElementById('container');
            const particleCount = 20;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'light-particle';
                particle.style.width = `${Math.random() * 10 + 5}px`;
                particle.style.height = particle.style.width;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.setProperty('--glow-min', '0.2');
                particle.style.setProperty('--glow-max', '0.6');
                particle.style.setProperty('--glow-scale-min', '0.5');
                particle.style.setProperty('--glow-scale-max', '1');
                particle.style.animation = `glow ${Math.random() * 3 + 2}s ease-in-out infinite`;
                container.appendChild(particle);
                setTimeout(() => particle.style.opacity = 1, i * 200);
            }
        }
        
        function createEndnoteParticles() {
            const container = document.getElementById('container');
            const particleCount = 10;
            const endnote = document.querySelector('.romantic-endnote');
            const rect = endnote.getBoundingClientRect();
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'light-particle endnote-particle';
                particle.style.left = `${rect.left + Math.random() * rect.width}px`;
                particle.style.top = `${rect.top - 10 + Math.random() * (rect.height + 20)}px`;
                particle.style.setProperty('--glow-min', '0.2');
                particle.style.setProperty('--glow-max', '0.5');
                particle.style.setProperty('--glow-scale-min', '0.4');
                particle.style.setProperty('--glow-scale-max', '0.8');
                container.appendChild(particle);
                setTimeout(() => particle.style.opacity = 1, i * 100);
            }
        }
        
        function setupMedallionPopups() {
            const mikhailMedallion = document.querySelector('.medallion.left');
            const annyutaMedallion = document.querySelector('.medallion.right');
            
            const mikhailDescription = "You pay for both of us, caring, attentive to small details, you listen, take interest in my hobbies and me in general, willing to compromise, ready to drag medicine across half of Seoul at night because I have a headache, you don’t dismiss my 'almost-rape' experience, and so much more.";
            const annyutaDescription = "Annyuta is a person of contrasts, blending independence with deep emotions. She values freedom and personal space, often hiding her feelings behind an outward reserve. Her thoughts can remain a mystery, but beneath this enigma lies a storm of emotions she rarely lets others see. She knows how to be sincere, but expresses it in her own way—through brief words, glances, and actions. It’s important to her that those around her don’t restrict her, but understand her need for silence and solitude. At times she may seem cold, but it’s just a protective shell. Deep down, she remembers those who stood by her, who understood and accepted her as she is.";
            
            mikhailMedallion.addEventListener('click', () => showPopup(mikhailDescription, 'mikhail-scene'));
            annyutaMedallion.addEventListener('click', () => showPopup(annyutaDescription, 'annyuta-scene'));
        }
        
        function showPopup(description, sceneId) {
            const existingPopup = document.querySelector('.popup');
            if (existingPopup) existingPopup.remove();
            
            const popup = document.createElement('div');
            popup.className = 'popup';
            popup.innerHTML = `
                <p>${description}</p>
                <button>Close</button>
            `;
            document.getElementById('container').appendChild(popup);
            
            setTimeout(() => popup.classList.add('visible'), 10);
            
            const closeButton = popup.querySelector('button');
            closeButton.addEventListener('click', () => {
                popup.classList.remove('visible');
                setTimeout(() => {
                    popup.remove();
                    startScene(sceneId);
                }, 500);
            });
        }
        
        function startScene(sceneId) {
            const overlay = document.querySelector('.fade-overlay');
            overlay.classList.add('active');
            setTimeout(() => {
                const scene = document.getElementById(sceneId);
                scene.style.display = 'block';
                overlay.classList.remove('active');
                
                if (sceneId === 'mikhail-scene') {
                    startMikhailAnimation();
                } else if (sceneId === 'annyuta-scene') {
                    startAnnyutaAnimation();
                }
            }, 1500);
        }
        
        function startMikhailAnimation() {
            const scene = document.getElementById('mikhail-scene');
            createSparks(scene);
        }
        
       function startAnnyutaAnimation() {
    const scene = document.getElementById('annyuta-scene');
    createSceneStars();
    createCraters();
    createConstellation();
    createShootingStars();
    createParticles();
    createComets();
    createNebulae();
    createStarBursts();
    setupMoonInteraction();
    createPraiseTexts();

    setInterval(() => {
        createSingleConstellation();
    }, 8000); // Создаем новую линию созвездия каждые 8 секунд

    const textFragments = scene.querySelectorAll('.text-fragment');
    textFragments.forEach((fragment, index) => {
        fragment.style.top = `${30 + index * 10}%`;
        fragment.style.left = '50%';
        fragment.style.transform = 'translateX(-50%)';
        fragment.style.animation = `fadeText 3s ease forwards ${index * 3 + 3}s`;
    });
}

function createSceneStars() {
    const starsContainer = document.getElementById('stars-scene');
    const starCount = Math.min(window.innerWidth / 5, 200);
    for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.className = 'star-scene';
        star.style.width = `${Math.random() * 3 + 1}px`;
        star.style.height = star.style.width;
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        star.style.animationDelay = `${Math.random() * 3}s`;
        starsContainer.appendChild(star);
    }
}

function createCraters() {
    const moon = document.getElementById('moon');
    const craterCount = 8;
    for (let i = 0; i < craterCount; i++) {
        const crater = document.createElement('div');
        crater.className = 'crater';
        const size = Math.random() * 30 + 10;
        crater.style.width = `${size}px`;
        crater.style.height = `${size}px`;
        crater.style.left = `${Math.random() * 80 + 10}%`;
        crater.style.top = `${Math.random() * 80 + 10}%`;
        moon.appendChild(crater);
    }
}

function createConstellation() {
    const starsContainer = document.getElementById('stars-scene');
    const constellationStars = [];
    for (let i = 0; i < 5; i++) {
        const star = document.createElement('div');
        star.className = 'star-scene';
        star.style.width = '4px';
        star.style.height = '4px';
        star.style.left = `${Math.random() * 60 + 20}%`;
        star.style.top = `${Math.random() * 60 + 20}%`;
        starsContainer.appendChild(star);
        constellationStars.push(star);
    }

    for (let i = 0; i < constellationStars.length - 1; i++) {
        const line = document.createElement('div');
        line.className = 'constellation-line';
        const start = constellationStars[i].getBoundingClientRect();
        const end = constellationStars[i + 1].getBoundingClientRect();
        const angle = Math.atan2(end.top - start.top, end.left - start.left) * 180 / Math.PI;
        const length = Math.sqrt(Math.pow(end.left - start.left, 2) + Math.pow(end.top - start.top, 2));
        line.style.width = `${length}px`;
        line.style.left = `${start.left + window.scrollX}px`;
        line.style.top = `${start.top + window.scrollY}px`;
        line.style.transform = `rotate(${angle}deg)`;
        line.style.animationDelay = `${i * 0.5}s`;
        starsContainer.appendChild(line);
    }
}

function createSingleConstellation() {
    const starsContainer = document.getElementById('stars-scene');
    const constellationStars = [];
    const starCount = Math.floor(Math.random() * 4 + 3);
    for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.className = 'star-scene';
        star.style.width = '3px';
        star.style.height = '3px';
        star.style.left = `${Math.random() * 50 + 25}%`;
        star.style.top = `${Math.random() * 50 + 25}%`;
        starsContainer.appendChild(star);
        constellationStars.push(star);
    }

    for (let i = 0; i < constellationStars.length - 1; i++) {
        const line = document.createElement('div');
        line.className = 'constellation-line';
        const start = constellationStars[i].getBoundingClientRect();
        const end = constellationStars[i + 1].getBoundingClientRect();
        const angle = Math.atan2(end.top - start.top, end.left - start.left) * 180 / Math.PI;
        const length = Math.sqrt(Math.pow(end.left - start.left, 2) + Math.pow(end.top - start.top, 2));
        line.style.width = `${length}px`;
        line.style.left = `${start.left + window.scrollX}px`;
        line.style.top = `${start.top + window.scrollY}px`;
        line.style.transform = `rotate(${angle}deg)`;
        line.style.animationDelay = `${i * 0.5}s`;
        starsContainer.appendChild(line);
        setTimeout(() => line.remove(), 6000);
    }

    setTimeout(() => constellationStars.forEach(star => star.remove()), 6000);
}

function createShootingStars() {
    const starsContainer = document.getElementById('stars-scene');
    setInterval(() => {
        const shootingStar = document.createElement('div');
        shootingStar.className = 'shooting-star';
        const startX = Math.random() * 80 + 10;
        const startY = Math.random() * 20;
        const travelX = (Math.random() * 200 - 100) + 'px';
        const travelY = (Math.random() * 200 + 100) + 'px';
        shootingStar.style.left = `${startX}%`;
        shootingStar.style.top = `${startY}%`;
        shootingStar.style.setProperty('--travel-x', travelX);
        shootingStar.style.setProperty('--travel-y', travelY);
        shootingStar.style.animation = `shootingStar ${Math.random() * 2 + 1}s ease-out forwards`;
        starsContainer.appendChild(shootingStar);
        setTimeout(() => shootingStar.remove(), 3000);
    }, 5000);
}

function createParticles() {
    const particlesContainer = document.getElementById('particles-scene');
    const particleCount = 20;
    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        const size = Math.random() * 4 + 1;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.setProperty('--start-x', `${Math.random() * 100 - 50}px`);
        particle.style.setProperty('--start-y', `${Math.random() * 100 - 50}px`);
        particle.style.setProperty('--end-x', `${Math.random() * 200 - 100}px`);
        particle.style.setProperty('--end-y', `${Math.random() * 200 - 100}px`);
        particle.style.setProperty('--size', Math.random() * 0.5 + 0.5);
        particle.style.setProperty('--opacity', Math.random() * 0.5 + 0.2);
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.top = `${Math.random() * 100}%`;
        particle.style.animationDelay = `${Math.random() * 10}s`;
        particlesContainer.appendChild(particle);
    }
}

function createComets() {
    const starsContainer = document.getElementById('stars-scene');
    setInterval(() => {
        const comet = document.createElement('div');
        comet.className = 'comet';
        const startX = Math.random() * 80 + 10;
        const startY = Math.random() * 20;
        const angle = Math.random() * 60 - 30;
        const length = Math.random() * 100 + 50;
        const travelX = Math.cos(angle * Math.PI / 180) * 300 + 'px';
        const travelY = Math.sin(angle * Math.PI / 180) * 300 + 'px';
        comet.style.left = `${startX}%`;
        comet.style.top = `${startY}%`;
        comet.style.setProperty('--angle', `${angle}deg`);
        comet.style.setProperty('--length', `${length}px`);
        comet.style.setProperty('--travel-x', travelX);
        comet.style.setProperty('--travel-y', travelY);
        starsContainer.appendChild(comet);
        setTimeout(() => comet.remove(), 8000);
    }, 10000);
}

function createNebulae() {
    const scene = document.getElementById('annyuta-scene');
    const nebulaCount = 3;
    for (let i = 0; i < nebulaCount; i++) {
        const nebula = document.createElement('div');
        nebula.className = 'nebula';
        const size = Math.random() * 200 + 100;
        nebula.style.width = `${size}px`;
        nebula.style.height = `${size}px`;
        nebula.style.left = `${Math.random() * 80}%`;
        nebula.style.top = `${Math.random() * 80}%`;
        nebula.style.animationDelay = `${Math.random() * 20}s`;
        scene.appendChild(nebula);
    }
}

function createStarBursts() {
    const starsContainer = document.getElementById('stars-scene');
    setInterval(() => {
        const burst = document.createElement('div');
        burst.className = 'star-burst';
        burst.style.left = `${Math.random() * 80 + 10}%`;
        burst.style.top = `${Math.random() * 80 + 10}%`;
        starsContainer.appendChild(burst);
        setTimeout(() => burst.remove(), 2000);
    }, 6000);
}

function setupMoonInteraction() {
    const moonContainer = document.getElementById('moonContainer');
    const moonGlow = moonContainer.querySelector('.moon-glow');
    const eclipse = document.createElement('div');
    eclipse.className = 'eclipse';
    const lunarRays = document.createElement('div');
    lunarRays.className = 'lunar-rays';
    moonContainer.appendChild(eclipse);
    moonContainer.appendChild(lunarRays);

    moonContainer.addEventListener('mouseenter', () => {
        eclipse.style.opacity = '1';
        lunarRays.style.opacity = '0.5';
        lunarRays.style.transform = 'scale(1)';
    });

    moonContainer.addEventListener('mouseleave', () => {
        eclipse.style.opacity = '0';
        lunarRays.style.opacity = '0';
        lunarRays.style.transform = 'scale(0)';
    });
}

function createPraiseTexts() {
    const scene = document.getElementById('annyuta-scene');
    const praises = ['Beautiful', 'Mysterious', 'Unique', 'Graceful'];
    praises.forEach((text, index) => {
        const praise = document.createElement('div');
        praise.className = 'praise-text';
        praise.textContent = text;
        praise.style.left = `${Math.random() * 60 + 20}%`;
        praise.style.top = `${Math.random() * 60 + 20}%`;
        praise.style.animation = `fadeText 4s ease-in-out ${index * 2}s infinite`;
        scene.appendChild(praise);
    });
}

function endScene(sceneId) {
    const overlay = document.querySelector('.fade-overlay');
    overlay.classList.add('active');
    setTimeout(() => {
        const scene = document.getElementById(sceneId);
        scene.style.display = 'none';
        overlay.classList.remove('active');
        if (sceneId === 'annyuta-scene') {
            cleanupAnnyutaScene();
        }
    }, 1500);
}

function cleanupAnnyutaScene() {
    const starsContainer = document.getElementById('stars-scene');
    const particlesContainer = document.getElementById('particles-scene');
    const moon = document.getElementById('moon');
    starsContainer.innerHTML = '';
    particlesContainer.innerHTML = '';
    moon.innerHTML = '';
    const scene = document.getElementById('annyuta-scene');
    scene.querySelectorAll('.nebula, .praise-text, .eclipse, .lunar-rays').forEach(el => el.remove());
}

function createClockNumbers() {
    const clockNumbers = document.querySelector('.clock-numbers');
    for (let i = 1; i <= 12; i++) {
        const number = document.createElement('div');
        number.className = 'clock-number';
        number.textContent = i.toString().padStart(2, '0');
        const angle = (i - 3) * 30 * Math.PI / 180;
        const radius = 90;
        number.style.left = `calc(50% + ${radius * Math.cos(angle)}px - 10px)`;
        number.style.top = `calc(50% + ${radius * Math.sin(angle)}px - 10px)`;
        clockNumbers.appendChild(number);
    }
}

function createSparks(container) {
    const sparkCount = 20;
    for (let i = 0; i < sparkCount; i++) {
        const spark = document.createElement('div');
        spark.className = 'light-particle';
        spark.style.width = `${Math.random() * 5 + 2}px`;
        spark.style.height = spark.style.width;
        spark.style.left = `${Math.random() * 100}%`;
        spark.style.top = `${Math.random() * 100}%`;
        spark.style.animation = `glow ${Math.random() * 2 + 1}s ease-in-out infinite`;
        container.appendChild(spark);
        setTimeout(() => spark.style.opacity = 1, i * 100);
    }
}
</script>
</body>
</html>
